post:
  tags:
    - Methods
  summary: >-
    Check available payment methods for order with order items and expected
    payment methods.
  description: >-
    This api check some conditions with these payment methods

    - Client code is existed and checksum is valid

    - The format of inputs must be valid, follow the description

    - Branch_code, service_code, method_code, partner_code must be existed

    - With items in payment methods need to check, a method must be supported by
    this partner. The `INSTALLMENT_CREDIT` method has some special validations.
    It check that the partner must support the `POS` method, and the bank is not
    empty, and this bank must be a payment partner support the
    `INSTALLMENT_CREDIT` method

    - The service must be supported by this method on the channel

    - The last checks are the rules with price rules, the terminal rules,
    product rules. They are defined by seller
  parameters:
    - name: client_code
      in: query
      schema:
        type: string
      description: Code for client to connect to Payment service
      required: true
    - name: branch_code
      in: query
      schema:
        type: string
      description: Branch code of this order
      required: true
    - name: service_code
      in: query
      schema:
        type: string
      description: 'Service code in Payment service. In this case, this is retail service'
      required: true
    - name: order_code
      in: query
      schema:
        type: string
      description: Order code in OM system
      required: true
    - name: order_items
      in: query
      schema:
        $ref: '#/components/schemas/OrderItem'
      description: Items of this order
      required: true
    - name: amount
      in: query
      schema:
        type: number
        format: double
      description: Total money must pay for this order
      required: true
    - name: methods
      in: query
      schema:
        $ref: '#/components/schemas/PaymentMethodReq'
      description: Methods need to check
      required: true
    - name: hash_secret
      in: query
      schema:
        type: string
      description: Secret string encrypted by secret key and all parameters for checksum
      required: true
  responses:
    '200':
      description: Methods list response
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PaymentMethodCheckRes'
    '400':
      description: Invalid request response
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PaymentError'
    '403':
      description: Forbiden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PaymentForbiddenError'
  servers:
    - url: 'http://payment.teko.vn'
